<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
   <title>EBNF Grammar for Mini-Java</title>
         <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<!--  style elements -->
<style type="text/css">
   body      {margin-left: 10%; margin-right:10% }  /* looks nicer with bigger margins */
   pre       {font-family: monospace;            }  /* some browsers forget */

   a:link    {text-decoration: none; color:black}   /* for unvisited links */
   a:visited {text-decoration: none; color:black}   /* for visited links */
   a:active  {text-decoration: none; color:black}   /* when link is clicked  */

  .quote  {border-color: blue; border: none; padding: 1em; background-color: #FFFFCC; color: black; margin-left: 10%; margin-right: 10% }
  .new    {color: darkblue; font-weight: bold; font-style: italic }
  .hilite {background-color: yellow}

  .key  {color: black; font-family: monospace; font-weight: bold}
  .meta {color: red; font-style: italic; font-size: larger}
</style>

</head>
<body>
   <h1>EBNF Grammar for Mini-Java</h1>

<p>

<!-- width = 117 15 6??  -->
<table>

  <!-- Goal -->
  <tbody>
    <tr> 
      <td valign="baseline" align="right"><a name="prod1">Goal</a></td>
      <td valign="baseline" align="center"><span class="meta">=</span></td>
      <td valign="baseline" align="left">
        <a href="#MainClass">MainClass</a><span class="meta">,</span>
        <span class="meta">{</span> <a href="#prod3">ClassDeclaration</a> <span class="meta">},</span>
        <a href="#EOF">EOF</a><span class="meta">;</span>
      </td>
    </tr>
    <tr style="height:15"><td></td></tr> <!-- for inter-row spacing -->
  </tbody>

  <!-- MainClass -->
  <tbody>
    <tr> 
      <td valign="baseline" align="right"><a name="MainClass">MainClass</a></td>
      <td valign="baseline" align="center"><span class="meta">=</span></td>
      <!-- class Identifier { public static void main ( String [ ] Identifier ) { Statement } } -->
      <td valign="baseline" align="left">
        <span class="key">"class"</span><span class="meta">,</span>
        <a href="#Identifier">Identifier</a><span class="meta">,</span>
        <span class="key">"{"</span><span class="meta">,</span>
        <span class="key">"public"</span><span class="meta">,</span>
        <span class="key">"static"</span><span class="meta">,</span>
        <span class="key">"void"</span><span class="meta">,</span>
        <span class="key">"main"</span><span class="meta">,</span>
        <span class="key">"("</span><span class="meta">,</span>
        <span class="key">"String"</span><span class="meta">,</span>
        <span class="key">"["</span><span class="meta">,</span>
        <span class="key">"]"</span><span class="meta">,</span>
        <a href="#Identifier">Identifier</a><span class="meta">,</span>
        <span class="key">")"</span><span class="meta">,</span>
        <span class="key">"{"</span><span class="meta">,</span>
        <a href="#Statement">Statement</a><span class="meta">,</span>
        <span class="key">"}"</span><span class="meta">,</span>
        <span class="key">"}"</span><span class="meta">;</span>
      </td>
    </tr>
    <tr style="height:15"><td></td></tr> <!-- for inter-row spacing -->
  </tbody>

  <!-- ClassDeclaration -->
  <tbody>
    <tr> 
      <td valign="baseline" align="right"><a name="ClassDeclaration">ClassDeclaration</a></td>
      <td valign="baseline" align="center"><span class="meta">=</span></td>
      <!-- class Identifier (/ extends Identifer /) { (: VarDeclaration :) (: MethodDeclaration :) }  -->
      <td valign="baseline" align="left">
        <span class="key">"class"</span><span class="meta">,</span>
        <a href="#Identifier">Identifier</a>
        <span class="meta">[</span>
           <span class="key">"extends"</span><span class="meta">,</span>
           <a href="#Identifier">Identifier</a>
        <span class="meta">]</span>
        <span class="key">"{"</span>
            <span class="meta">{</span> <a href="#VarDeclaration">VarDeclaration</a> <span class="meta">}</span>
        <span class="meta">{</span> <a href="#MethodDeclaration">MethodDeclaration</a>
        <span class="meta">}</span>
        <span class="key">"}"</span>
      </td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">|</span></td>
      <!-- record Identifier  () {} -->
      <td valign="baseline" align="left">
        <span class="key">"record"</span><span class="meta">,</span>
        <a href="#Identifier">Identifier</a><span class="meta">,</span>
        <span class="key">"("</span>
        <span class="meta">[</span>
           <a href="#Type">Type</a><span class="meta">,</span>
           <a href="#Identifier">Identifier</a>
              <span class="meta">{</span>
                 <span class="key">","</span><span class="meta">,</span>
                 <a href="#Type">Type</a><span class="meta">,</span> 
        <a href="#Identifier">Identifier</a> <span class="meta">}</span>
        <span class="meta">]</span>
        <span class="key">")"</span><span class="meta">,</span>
        <span class="key">"{"</span><span class="meta">,</span>
        <span class="key">"}"</span>
      </td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">;</span></td>
      <td valign="baseline" align="left"></td>
    </tr>

    <tr style="height:15"><td></td></tr> <!-- for inter-row spacing -->
  </tbody>

  <!-- VarDeclaration -->
  <tbody>
    <tr> 
      <td valign="baseline" align="right"><a name="VarDeclaration">VarDeclaration</a></td>
      <td valign="baseline" align="center"><span class="meta">=</span></td>
      <td valign="baseline" align="left">
      <a href="#Type">Type</a><span class="meta">,</span>
      <a href="#Identifier">Identifier</a><span class="meta">,</span>
      <span class="key">";"</span>
      <span class="meta">;</span>
    </td></tr>
    <tr style="height:15"><td></td></tr> <!-- inter-row spacing -->
  </tbody>

  <!-- MethodDeclaration -->
  <tbody>
    <tr> 
      <td valign="baseline" align="right"><a name="MethodDeclaration">MethodDeclaration</a></td>
      <td valign="baseline" align="center"><span class="meta">=</span></td>
      <td valign="baseline" align="left">
        <span class="key">"public"</span><span class="meta">,</span>
        <a href="#Type">Type</a><span class="meta">,</span>
        <a href="#Identifier">Identifier</a><span class="meta">,</span>
        <span class="key">"("</span>
        <span class="meta">[</span>
           <a href="#Type">Type</a><span class="meta">,</span>
           <a href="#Identifier">Identifier</a>
              <span class="meta">{</span>
                 <span class="key">","</span><span class="meta">,</span>
                 <a href="#Type">Type</a><span class="meta">,</span> 
        <a href="#Identifier">Identifier</a> <span class="meta">}</span>
        <span class="meta">]</span>
        <span class="key">")"</span><span class="meta">,</span>
        <span class="key">"{"</span>
        <span class="meta">{</span><a href="#VarDeclaration">VarDeclaration</a> <span class="meta">}</span>
        <span class="meta">{</span><a href="#Statement">Statement</a><span class="meta">}</span>
        <span class="key">"return"</span><span class="meta">,</span>
        <a href="#Expression">Expression</a><span class="meta">,</span>
        <span class="key">";"</span><span class="meta">,</span>
        <span class="key">"}"</span><span class="meta">;</span>
      </td>
    </tr>
    <tr style="height:15"><td></td></tr> <!-- inter-row spacing -->
  </tbody>

  <!-- Type -->
  <tbody>
    <tr> 
      <td valign="baseline" align="right"><a name="Type">Type</a></td>
      <td valign="baseline" align="center"><span class="meta">=</span></td>
      <td valign="baseline" align="left">
         <span class="key">"int"</span><span class="meta">,</span>
         <span class="key">"["</span><span class="meta">,</span>
         <span class="key">"]"</span>
      </td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">|</span></td>
      <td valign="baseline" align="left"><span class="key">"boolean"</span></td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">|</span></td>
      <td valign="baseline" align="left"><span class="key">"int"</span></td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">|</span></td>
      <td valign="baseline" align="left"><a href="#Identifier">Identifier</a></td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">;</span></td>
      <td valign="baseline" align="left"></td>
    </tr>

    <tr style="height:15"><td></td></tr> <!-- inter-row spacing -->
  </tbody>

  <!-- Statement -->
  <tbody>
    <tr> 
      <td valign="baseline" align="right"><a name="Statement">Statement</a></td>
      <td valign="baseline" align="center"><span class="meta">=</span></td>
      <td valign="baseline" align="left">
        <span class="key">"{"</span>
        <span class="meta">{</span><a href="#Statement">Statement</a><span class="meta">}</span>
        <span class="key">"}"
      </span></td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">|</span></td>
      <td valign="baseline" align="left">
        <span class="key">"if"</span><span class="meta">,</span>
        <span class="key">"("</span><span class="meta">,</span>
        <a href="#Expression">Expression</a><span class="meta">,</span>
        <span class="key">")"</span><span class="meta">,</span>
        <a href="#Statement">Statement</a><span class="meta">,</span>
        <span class="key">"else"</span><span class="meta">,</span>
        <a href="#Statement">Statement</a>
      </td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">|</span></td>
      <td valign="baseline" align="left">
        <span class="key">"while"</span><span class="meta">,</span>
        <span class="key">"("</span><span class="meta">,</span>
        <a href="#Expression">Expression</a><span class="meta">,</span>
        <span class="key">")"</span><span class="meta">,</span>
        <a href="#Statement">Statement</a>
      </td>
    </tr>
    
    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">|</span></td>
      <td valign="baseline" align="left">
         <span class="key">"System" "." "out" "." "println"</span><span class="meta">,</span>
         <span class="key">"("</span> <span class="meta">,</span>
         <a href="#Expression">Expression</a><span class="meta">,</span>
         <span class="key">")"</span><span class="meta">,</span>
         <span class="key">";"</span>
      </td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">|</span></td>
      <td valign="baseline" align="left">
         <a href="#Identifier">Identifier</a><span class="meta">,</span>
         <span class="key">"="</span><span class="meta">,</span>
         <a href="#Expression">Expression</a><span class="meta">,</span>
         <span class="key">";"</span>
      </td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">|</span></td>
      <td valign="baseline" align="left">
         <a href="#Identifier">Identifier</a><span class="meta">,</span>
         <span class="key">"["</span><span class="meta">,</span>
         <a href="#Expression">Expression</a><span class="meta">,</span>
         <span class="key">"]"</span><span class="meta">,</span>
         <span class="key">"="</span><span class="meta">,</span>
         <a href="#Expression">Expression</a><span class="meta">,</span>
         <span class="key">";"</span>
      </td>
    </tr>

    <tr> 
      <td valign="baseline" align="right"></td>
      <td valign="baseline" align="center"><span class="meta">;</span></td>
      <td valign="baseline" align="left"></td>
    </tr>
    <tr style="height:15"><td></td></tr> <!-- inter-row spacing -->
    </tbody>

    <!-- Expression -->
    <tbody>

       <!-- Expression ::= Expression ( "&&" | "<" | "+" | "-" | "*" ) Expression -->
       <tr> 
          <td valign="baseline" align="right"><a name="Expression">Expression</a></td>
          <td valign="baseline" align="center"><span class="meta">=</span></td>
          <td valign="baseline" align="left">
             <a href="#Expression">Expression</a>
             <span class="meta">(</span> "&amp;&amp;" | "&lt;" | "+" | "-" | "*" <span class="meta">)</span>
             <a href="#Expression">Expression</a>
         </td>
       </tr>

       <!-- Expression ::= Expression "." Identifier { Expression , Expression } ) " -->
       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span></td>
         <td valign="baseline" align="left">
            <a href="#Expression">Expression</a> <span class="meta">,</span>
            <span class="key">"."</span> <span class="meta">,</span>
            <a href="#Identifier">Identifier</a> <span class="meta">,</span>
            <span class="key">"("</span> <span class="meta">,</span>
            <span class="meta">[</span> <a href="#Expression">Expression</a> <span class="meta">{</span>
            <span class="key">","</span> <span class="meta">,</span>
            <a href="#Expression">Expression</a> <span class="meta">}</span>
            <span class="meta">]</span> <span class="meta">,</span>
            <span class="key">")"</span>
         </td>
       </tr>
       
       <!-- Expression ::= Expression  "[" Expression "]" -->
       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span></td>
         <td valign="baseline" align="left">
            <a href="#Expression">Expression</a><span class="meta">,</span>
            <span class="key">"["</span><span class="meta">,</span>
            <a href="#Expression">Expression</a><span class="meta">,</span>
            <span class="key">"]"</span>
       </td></tr>

       <!-- Expression ::= Expression "." "length" -->
       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span></td>
         <td valign="baseline" align="left">
         <a href="#Expression">Expression</a><span class="meta">,</span>
         <span class="key">"."</span><span class="meta">,</span>
         <span class="key">"length"</span>
       </td></tr>

       <!-- Expression ::= "new" "int" "[" Expression "]" -->
       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span></td>
         <td valign="baseline" align="left">
            <span class="key">"new"</span><span class="meta">,</span>
            <span class="key">"int"</span><span class="meta">,</span>
            <span class="key">"["</span><span class="meta">,</span>
            <a href="#Expression">Expression</a><span class="meta">,</span>
            <span class="key">"]"</span>
         </td>
       </tr>


       <!-- Expression ::= "new" Identifer "(" ")" -->
       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span></td>
         <td valign="baseline" align="left">
            <span class="key">"new"</span> <span class="meta">,</span>
            <a href="#Identifier">Identifier</a> <span class="meta">,</span>
            <span class="key">"("</span> <span class="meta">,</span>
            <span class="meta">[</span> <a href="#Expression">Expression</a> <span class="meta">{</span>
            <span class="key">","</span> <span class="meta">,</span>
            <a href="#Expression">Expression</a> <span class="meta">}</span>
            <span class="meta">]</span> <span class="meta">,</span>
            <span class="key">")"</span>
         </td>
       </tr>

       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span></td>
         <td valign="baseline" align="left">
            <span class="key">"!"</span><span class="meta">,</span>
            <a href="#Expression">Expression</a>
         </td>
       </tr>

       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span></td>
         <td valign="baseline" align="left">
         <a href="#IntegerLiteral">IntegerLiteral</a>
         </td>
       </tr>
       
       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span> </td>
         <td valign="baseline" align="left"><span class="key">"true"</span></td>
       </tr>
       
       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span> </td>
         <td valign="baseline" align="left"><span class="key">"false"</span></td>
       </tr>

       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span></td>
         <td valign="baseline" align="left"><a href="#Identifier">Identifier</a></td>
       </tr>

       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span></td>
         <td valign="baseline" align="left"><span class="key">"this"</span></td>
       </tr>

       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">|</span></td>
         <td valign="baseline" align="left">
           <span class="key">"("</span><span class="meta">,</span>
           <a href="#Expression">Expression</a><span class="meta">,</span>
           <span class="key">")"</span>
         </td>
       </tr>

       <tr> 
         <td valign="baseline" align="right"></td>
         <td valign="baseline" align="center"><span class="meta">;</span></td>
         <td valign="baseline" align="left"></td>
       </tr>
       <tr style="height:15"><td></td></tr> <!-- inter-row spacing -->
     </tbody>

     <!-- Identifier -->
     <tbody>
       <tr> 
         <td valign="baseline" align="right"><a name="Identifier">Identifier</a></td>
         <td valign="baseline" align="center"><span class="meta">is</span></td>
         <td valign="baseline" align="left">
           one or more letters, digits, and underscores, starting with a letter
         </td>
       </tr>
     </tbody>

  <!-- IntegerLiteral -->
  <tbody>
    <tr> 
      <td valign="baseline" align="right"><a name="IntegerLiteral">IntegerLiteral</a></td>
      <td valign="baseline" align="center"><span class="meta">is</span></td>
      <td valign="baseline" align="left">
        one or more decimal digits [see Java spec for largest]
      </td>
    </tr>
  </tbody>

  <!-- EOF -->
  <tbody>
    <tr> 
      <td valign="baseline" align="right"><a name="EOF">EOF</a></td>
      <td valign="baseline" align="center"><span class="meta">is</span></td>
      <td valign="baseline" align="left">
        a distinguished token returned by the scanner at end-of-file
      </td>
    </tr>
  </tbody>
</table>

</p><p>
There is a problem of consistency with Java concerning array access and array creation.
They are both expressions.
In Java <code>new int [5][4]</code> is 2D array creation and not array access
as in MiniJava <code>(new int [5])[4]</code>.

</p><h2>EBNF</h2>

<a href="http://www.cl.cam.ac.uk/~mgk25/iso-14977.pdf">ISO/IEC 14977: 1996(E)</a>
<ul>
  <li>Terminal symbols are quoted
  </li><li><span class="meta">[</span> and <span class="meta">]</span> indicate optional symbols
  </li><li><span class="meta">{</span> and <span class="meta">}</span> indicate repetition
  </li><li><span class="meta">(</span> and <span class="meta">)</span> group items together;
      the other brackets do too
      
</li></ul>

<h2>MiniJava Character Set</h2>

Any sequence of bytes is potential input to the MiniJava compiler.
The MiniJava compiler should interpret the input as a text file of 
<a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1">Latin-1 characters</a>.
This fixes the meaning of every 8-bit byte
as a single character (unlike UTF-8)--not necessarly a printable character.
The syntax of a MiniJava program actually requires only a subset of
<a href="http://en.wikipedia.org/wiki/ASCII">US-ASCII characters</a>
(which is a subset of <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1">Latin-1</a>).
This is different than Java which handle multiple character sets as input.

<p>
No Java/Python unicode escapes <code>\uXXXX</code> are used in MiniJava,
but are easy to include using a JavaCC options: <code>JAVA_UNICODE_ESCAPE=true</code>.

</p><p>
Line terminators are LF, CF, or CF followed by LF.
In addition to the line terminators,
white space is SP, HT, or the FF characters.
(In Java the input can end with the US-ASCII SUB character,
also known as "control-Z".)

</p><h2>Java Comments</h2>

Comments are <tt>//</tt> to end of line and <tt>/* ... */</tt>, just
as in Java.  The <tt>/* ... */</tt> comments do <em>not</em> nest in Java.
For example,
<pre>/*
   One commment
   /*  Nested comment */
   Bad things will happen
*/
</pre>
The second <tt>/*</tt> will be ignored (it is in a comment), and
the first <tt>*/</tt> will terminate the comment.
Now, "bad things will happen" as the remaining text is not a comment.

<p>
Appel, 2nd edition, page 484, describes comments in MiniJava as being nestable.
This is an interesting exercise for the scanner, but is not correct.

</p><p>
Any
<a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1">Latin-1</a>
character is legal in a Java comment.

</p><h2>Programming Meaning</h2>

Mini Java is supposed to be a subset of Java.
If the input is not a legal (lexically, syntactically, and semantically correct) Java 20 program, then
it is not a legal Mini Java program.
<pre>javac -encoding ISO-8859-1 ClassFile.java
</pre>
A Mini Java program behaves exactly like the Java program.
<p></p>

<p>
The following program is not legal in Java:
</p><pre>class Main {
  void m() {
    int goto = 3; // 'goto' is a reserved word in Java
  }
}
</pre>
it should not be legal in Mini-Java.
<p></p>


<p>
A Mini-Java program with uninitilized variables ought to
be illegal just as in Java.
A Mini-java program with unreachable statements ought to
be illegal just as in Java.
However, it is not possible to write a Mini-Java program
with an unreachable statement.

</p><h2>Java Keywords</h2>

Many Java keywords are not used in MiniJava.
Consult the Java language specification for details.
Java now has contextual keywords.

<h2>Relaxations from Java</h2>

In order to simplify the programming project, we make the
following simplifications:

<ul>
  <li>No unicode escapes.
  </li><li>No byte, short, or long type.
  </li><li>No char or String type.
  </li><li>No floating-point types (float, double)
  </li><li>No literal <tt>null</tt>.
  </li><li>No test for primitive equality, or equality of references.
  </li><li>Five or fewer formal arguments in methods.
  </li><li>No methods are overriden.
  </li><li>No methods are overloaded.
</li></ul>

(However, you may include these features, if you wish.)


<p>
A minimal Mini-Java compiler must, however, include the following features:
</p><ul>
  <li>Subclass and subclass polymorphism.
  </li><li>Inherited fields and methods.
</li></ul>
      
<br>


</body></html>